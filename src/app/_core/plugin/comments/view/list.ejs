<style>
    .nogrow {
        flex-grow: 0 !important;
    }

    .grow {
        flex-grow: 1 !important;
    }

    .admin-comment-list {
        width: 100%;
        padding: 3px;
    }

    .admin-comment-list .comment {
        position: relative;
        width: 100%;
    }

    .admin-comment-list .comment-date-wrap {
        width: 150px;
    }

    .admin-comment-list .comment-date {
        width: 100px;
        height: 100px;
        float: left;
        margin-right: 50px;
    }

    .admin-comment-list .comment-date:before {
        position: absolute;
        height: 1px;
        width: 50px;
        left: 100px;
        top: 50%;
        border-bottom: 1px solid #E9E9E9;
        content: '';
    }

    .admin-comment-list .comment-date div {
        font-size: 1.75rem;
        line-height: 1;
    }

    .admin-comment-list .comment-date div:first-child {
        font-size: 1rem;
        text-transform: uppercase;
    }
    .admin-comment-list .comment-date div:last-child {
        font-size: .7rem;
    }

    .admin-comment-list .comment-excerpt {
        height: 99px;
        padding: 15px;
        overflow: hidden;
        flex-grow: 1 !important;
    }

    .admin-comment-list .comment-author i.lnr-user,
    .admin-comment-list .comment-post i.lnr-pushpin,
    .admin-comment-list .comment-body i.lnr-bubble {
        margin: 4px 15px 0 4px;
        float: left;
    }

    .admin-comment-list .comment-body {
        text-overflow: ellipsis;
        overflow: hidden;
        max-height: 20px;
    }

    .admin-comment-list .dot {
        display: inline-block;
        content: "";
        width: 8px;
        height: 8px;
        margin: 0 10px 1px 10px;
    }

</style>

<section class="admin-list admin-comment-list">
    <div class="mb-2 mb-sm-2 mt-sm-2 mt-md-4 mb-md-5 mt-lg-0">
        <div class="row">
            <div class="col-sm-12 col-md-3">
                <h5 class="d-inline-block"><i class="lnr-bubbles ico"></i> Comments</h5>
            </div>
            <div class="col-sm-12 col-md-9">
                <div class="comment-filters float-right my-2 my-md-0 btn-group">
                    <% if (comments.query.hasOwnProperty('author')) { %>
                    <button type="button" class="btn pb-1 btn-sm btn-outline-danger text-uppercase" data-without="<%=comments.query.author%>"><i class="lnr-cross mr-2 float-left" style="font-size: 16px;"></i> user</button>
                    <% } %>

                    <% if (comments.query.hasOwnProperty('post')) { %>
                    <button type="button" class="btn pb-1 btn-sm btn-outline-danger text-uppercase" data-without="<%=comments.query.post%>"><i class="lnr-cross mr-2 float-left" style="font-size: 16px;"></i> post</button>
                    <% } %>

                    <% if (comments.query.hasOwnProperty('status')) { %>
                    <% if (comments.query.status.length === 1) { %>
                    <button type="button" class="btn pb-1 btn-sm btn-outline-danger text-uppercase" data-without="<%=comments.query.status.join('')%>"><i class="lnr-cross mr-2 float-left" style="font-size: 16px;"></i> <%=comments.query.status.join('')%></button>
                    <% } } %>

                    <% if (comments.filtered === true) { %>
                    <a href="/admin/comments/1" class="btn pb-1 btn-sm btn-outline-danger text-uppercase" data-toggle="tooltip" data-placement="left" title="clear filters"><i class="lnr-cross float-left" style="font-size: 16px;"></i></a>
                    <% } %>

                    <button type="button" class="btn pb-1 btn-sm btn-danger" data-toggle="tooltip" data-placement="left" title="filter"><i class="lnr-funnel float-left" style="font-size: 16px;"></i></button>
                </div>
            </div>
        </div>
    </div>
    <% comments.list.forEach((item) => { %>
    <div class="comment small txtc-gray-light d-flex mt-md-5 mt-2">
        <div class="nogrow comment-date-wrap hidden-sm-down">
            <div class="nogrow comment-date card-shadow rounded-circle bgc-white d-flex justify-content-center align-items-center flex-column">
                <div class="nogrow"><%-item.date.split(' ').join('</div><div class="nogrow">')%></div>
            </div>
        </div>

        <div class="grow comment-excerpt card-shadow bgc-white bd-t-1 bdc-<%=item.status_color%> d-flex align-content-center justify-content-between align-items-stretch flex-column">
            <div class="comment-post bold nogrow txtc-gray">
                <i class="lnr-pushpin txtc-gray"></i>
                <a href="/admin/comments/1/<%=item.post.objectId%>" class="txtc-gray"><%=item.post.title%></a>
            </div>

            <div class="comment-author grow d-flex align-items-center">
                <div>
                    <% if (item.op === true) { %>
                    <i class="lnr-user txtc-gray"></i> <a href="?user=<%=item.author.objectId%>" class="bold txtc-gray"><%=item.author.username%></a>
                    <% } else { %>
                    <i class="lnr-user txtc-gray"></i> <a href="?user=<%=item.author.objectId%>" class="bold txtc-gray-light"><%=item.author.username%></a>
                    <% } %>

                    <a href="/admin/comments/1/<%=item.post.objectId%>/<%=item.status%>" class="dot rounded-circle bgc-<%=item.status_color%>"></a>

                    <span class="txtc-gray-light monospace" style="font-size: 1rem"><%=item.time%></span>
                </div>
                <div class="text-right">
                    <div class="btn-group" role="group" aria-label="...">
                        <% if (item.status === 'wait') { %>
                        <button data-approve="<%=item.objectId%>" class="btn btn-sm btn-secondary text-uppercase pt-2" data-toggle="tooltip" data-placement="left" title="APPROVE">
                            <i class="lnr-thumbs-up"></i>
                        </button>
                        <% } %>
                        <button data-moderate="<%=item.objectId%>" class="btn btn-sm btn-secondary text-uppercase pt-2" data-toggle="tooltip" data-placement="left" title="MODERATE">
                            <i class="lnr-pen"></i>
                        </button>
                    </div>
                </div>

            </div>

            <div class="comment-body txtc-gray-light">
                <i class="lnr-bubble txtc-gray"></i>
                <%-core.hbsParse(item.body)%>
            </div>
        </div>
    </div>
    <% }); %>
</section>
